# Feature Specification: 學術演講影片平台

**Feature Branch**: `001-academic-video-portal`
**Created**: 2025-12-19
**Status**: Draft
**Input**: User description: "建立一個學術演講影片網站， 這個網站需要登入才能觀看影片，未登入前只能看到影片的縮圖以及一些基本資料 首頁使用card來表示一支影片，一頁中不要有太多影片最多20部，以排列美觀為主，並用pagination分頁，且要支援搜尋功能 在上傳的部分，可以上傳mp4或是zip，如果上傳的是zip檔會先進行解壓縮後確認裡面有index.html檔案存在，並將此index.html作為影片的網址，如果是mp4就直接當成影片網址 在建立影片基本資料時可以設定影片所屬院區，在首頁呈現時需要依這個設定值進行分類，並且可以輸入講者資訊，講者的資訊要包含名稱、服務單位、職務(醫師、護理師、藥師、主任等)，並且要可以上傳一張縮圖作為影片的預設圖片，還需要一個欄位設定演講的日期"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 訪客瀏覽 (Visitor Browsing) (Priority: P1)

作為一個訪客（未驗證的使用者），我想要瀏覽首頁來查看所有可用的演講，以便發現感興趣的內容。

**Why this priority**: 這是網站的核心功能，吸引使用者並展示平台價值的入口。

**Independent Test**: 可以在不需登入的情況下，存取網站首頁，並驗證所有演講的卡片、分頁和搜尋功能是否正常運作。

**Acceptance Scenarios**:

1.  **Given** 我在網站首頁, **When** 我查看演講列表, **Then** 我能看到一個由影片卡片組成的格狀列表。
2.  **Given** 我看到一個影片卡片, **Then** 它會顯示縮圖、標題、講者姓名和演講日期。
3.  **Given** 我在首頁滾動到頁面底部, **Then** 我能看到分頁控制項，用來導航到其他頁面。
4.  **Given** 我在首頁的搜尋框輸入關鍵字, **Then** 影片列表會根據我的搜尋詞進行篩選。
5.  **Given** 我在首頁看到不同院區的影片, **Then** 這些影片會依院區進行分類或提供篩選功能。
6.  **Given** 我點擊任一影片卡片, **Then** 系統會提示我需要登入才能觀看影片。

---

### User Story 2 - 已驗證的觀看 (Authenticated Viewing) (Priority: P2)

作為一個已登入的使用者，我想要觀看任何一場演講影片，以便獲取學術內容。

**Why this priority**: 這是已註冊使用者的核心價值，滿足他們觀看受保護內容的需求。

**Independent Test**: 使用者登入後，可以點擊任何影片並成功播放。

**Acceptance Scenarios**:

1.  **Given** 我已登入並在首頁, **When** 我點擊一個影片卡片, **Then** 我會被導向到影片播放頁面並可以觀看該影片。

---

### User Story 3 - 內容上傳管理 (Content Manager Uploading) (Priority: P3)

作為一個內容管理者，我想要上傳新的演講影片及其後設資料，以便為平台增加新內容。

**Why this priority**: 這是維持平台內容更新與成長的必要功能。

**Independent Test**: 內容管理者可以成功登入後台，填寫表單，上傳一個新的演講影片及其所有資訊，並在前台看到結果。

**Acceptance Scenarios**:

1.  **Given** 我是一個內容管理者, **When** 我進入上傳頁面, **Then** 我會看到一個建立新演講的表單。
2.  **Given** 我在新演講表單中, **When** 我填寫標題、講者資訊（姓名、服務單位、職務）、院區和演講日期, **Then** 這些資訊會被儲存。
3.  **Given** 我在新演講表單中, **When** 我上傳一張縮圖, **Then** 它會與該演講關聯。
4.  **Given** 我在新演講表單中, **When** 我上傳一個 `.mp4` 檔案, **Then** 它會成為該演講的影片來源。
5.  **Given** 我在新演講表單中, **When** 我上傳一個包含 `index.html` 的 `.zip` 檔, **Then** 該 `index.html` 會成為該演講的內容來源。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須提供一個公開的首頁，以分頁列表形式顯示演講影片。
- **FR-002**: 首頁上的每個影片必須以卡片形式呈現，顯示其縮圖、標題、講者和日期。
- **FR-003**: 首頁每頁最多顯示 20 個影片，並包含分頁控制項。
- **FR-004**: 系統必須允許未驗證的使用者瀏覽和搜尋影片，但不能觀看。
- **FR-005**: 系統必須要求使用者進行身份驗證才能觀看影片內容。
- **FR-006**: 首頁必須允許使用者透過標題、講者姓名和服務單位等後設資料搜尋影片。
- **FR-007**: 首頁必須使用頁籤 (Tabs) 依「院區」分類影片，包含「ALL」（預設，影片依時間上傳新到舊排序）、大林、花蓮、台中、台北、法人等選項。
- **FR-008**: 系統必須為授權使用者（內容管理者）提供上傳影片內容的介面。
- **FR-009**: 上傳介面必須接受 `.mp4` 和 `.zip` 格式的檔案。
- **FR-010**: 若上傳 `.zip` 檔，系統必須解壓縮並驗證其中包含 `index.html` 檔案，以作為內容網址。
- **FR-011**: 上傳介面必須允許內容管理者輸入後設資料：院區、講者姓名、服務單位、職務和演講日期。
- **FR-012**: 上傳介面必須允許內容管理者為影片上傳縮圖。
- **FR-013**: 系統必須定義三種使用者角色：訪客、一般會員、內容管理者。
- **FR-014**: 若內容管理者上傳的 .zip 檔中不包含 index.html，系統必須顯示錯誤訊息並拒絕上傳。
- **FR-015**: 系統在處理使用者登入時，必須呼叫指定的 SOAP Web Service 進行身份驗證。
- **FR-016**: 當使用者執行搜尋沒有找到符合的影片時，系統必須顯示「沒有找到符合的影片」訊息，並提供調整搜尋條件或瀏覽全部影片的建議。
- **FR-017**: 在登入時，如果用於身份驗證的 SOAP Web Service 無法連線或回傳錯誤，系統必須向使用者顯示「登入服務暫時無法使用，請稍後再試」的訊息，並在後端記錄詳細錯誤。

### Key Entities *(include if feature involves data)*

- **影片 (Video)**: 代表單一演講。屬性：標題、內容網址（指向 mp4 或 html 的路徑）、縮圖網址、演講日期、所屬院區。
- **講者 (Speaker)**: 代表演講者。屬性：姓名、服務單位、職務。
- **使用者 (User)**: 代表系統使用者。屬性：使用者名稱、角色（訪客、一般會員、內容管理者）。本地資料庫不儲存密碼。
- **院區 (Campus)**: 用於對影片進行分類的類別。屬性：名稱。

## Clarifications

### Session 2025-12-19
- Q: 使用者角色應如何劃分？例如：訪客、一般會員、內容管理者，這樣的劃分是否足夠？ → A: 訪客、一般會員、內容管理者
- Q: 搜尋功能應包含哪些欄位的搜尋？例如標題、講者姓名、服務單位等？ → A: 標題、講者姓名、服務單位
- Q: 應如何依「院區」分類影片？是使用頁籤(tabs)、下拉式選單篩選，還是各自獨立的區塊？ → A: 頁籤，目前選項有大林、花蓮、台中、台北、法人，並且第一個頁籤是ALL影片依時間上傳新到舊排序
- Q: 如果內容管理者上傳的 .zip 檔中不包含 index.html，系統應如何處理？ → A: 顯示錯誤訊息並拒絕上傳
- Q: 使用者身份驗證機制應如何實作？ → A: (更正) 後端需呼叫一個 SOAP Web Service 來驗證使用者登入。本地資料庫仍用於儲存使用者基本資料。
- Q: 當使用者執行搜尋但沒有找到任何符合的影片時，使用者介面應如何顯示？ → A: 顯示「沒有找到符合的影片」訊息，並建議使用者調整搜尋條件或瀏覽全部影片。
- Q: 在登入時，如果用於身份驗證的 SOAP Web Service 無法連線或回傳錯誤，系統應如何處理？ → A: 向使用者顯示「登入服務暫時無法使用，請稍後再試」的訊息，並在後端記錄詳細錯誤。
- Q: 用於身份驗證的 SOAP Web Service 端點 URL 是什麼？ → A: Location: https://lms.tzuchi.com.tw/tzuchi/webservice/user/svr.php, URI: https://lms.tzuchi.com.tw/tzuchi/webservice/user

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 新使用者從首頁能在 3 次點擊內找到並嘗試觀看一個影片。
- **SC-002**: 內容管理者能在 5 分鐘內成功上傳一個新影片及其所有後設資料。
- **SC-003**: 在標準的網路連線下，首頁和搜尋結果的載入時間必須在 3 秒以內。
- **SC-004**: 100% 未經驗證的使用者在嘗試觀看影片時，會被登入提示所阻擋。
